<view class="container">
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <view wx:else class="content">
    <view class="order-card">
      <view class="order-header">
        <text class="order-title">é”€å”®å•</text>
        <text class="order-number">{{order.orderNumber}}</text>
      </view>
      
      <view class="order-info">
        <view class="info-row">
          <text class="info-label">å®¢æˆ·:</text>
          <text class="info-value">{{order.customerName}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">è”ç³»äºº:</text>
          <text class="info-value">{{order.customerContact || '-'}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">ç”µè¯:</text>
          <text class="info-value">{{order.customerPhone || '-'}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">æ—¥æœŸ:</text>
          <text class="info-value">{{order.createdAt}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">çŠ¶æ€:</text>
          <text class="info-value status {{order.status === 'å·²ä½œåºŸ' ? 'voided' : ''}}">{{order.status}}</text>
        </view>
      </view>

      <view class="products-section">
        <view class="section-title">å•†å“æ˜ç»†</view>
        <view class="products-list">
          <view class="product-item" wx:for="{{order.products}}" wx:key="id">
            <view class="product-info">
              <text class="product-name">{{item.name}}</text>
              <text class="product-code">ç¼–ç : {{item.code}}</text>
            </view>
            <view class="product-details">
              <text class="product-quantity">æ•°é‡: {{item.quantity % 1 === 0 ? item.quantity : item.quantity.toFixed(1)}}{{item.unitName}}</text>
              <text class="product-price">å•ä»·: Â¥{{item.price || '0.00'}}</text>
              <text class="product-total">å°è®¡: Â¥{{item.totalAmount || '0.00'}}</text>
            </view>
          </view>
        </view>
      </view>

      <view class="summary-section">
        <view class="summary-row">
          <text class="summary-label">å•†å“æ•°é‡:</text>
          <text class="summary-value">{{order.productCount}}</text>
        </view>
        <view class="summary-row">
          <text class="summary-label">æ€»é‡‘é¢:</text>
          <text class="summary-value amount">Â¥{{order.totalAmount}}</text>
        </view>
        <view class="summary-row" wx:if="{{order.remark}}">
          <text class="summary-label">å¤‡æ³¨:</text>
          <text class="summary-value">{{order.remark}}</text>
        </view>
      </view>
    </view>

    <view class="actions">
      <button wx:if="{{order.status === 'è‰ç¨¿'}}" class="action-btn edit-btn" bindtap="editOrder">
        ç¼–è¾‘
      </button>
      <button wx:if="{{order.status !== 'å·²ä½œåºŸ' && order.status !== 'è‰ç¨¿'}}" class="action-btn void-btn" bindtap="voidOrder">
        ä½œåºŸ
      </button>
      <button wx:if="{{order.status !== 'è‰ç¨¿'}}" class="action-btn print-btn" bindtap="printOrder">
        <text class="btn-icon">ğŸ–¨ï¸</text>
        <text class="btn-text">æ‰“å°</text>
      </button>
      <button class="action-btn back-btn" bindtap="goBack">
        <text class="btn-text">è¿”å›</text>
      </button>
    </view>
  </view>
</view>